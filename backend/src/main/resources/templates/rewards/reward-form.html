<!DOCTYPE html>
<html lang="ca" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <title th:text="${formMode == 'create'} ? 'Crear Recompensa' : 'Editar Recompensa'"></title>
        <link rel="stylesheet" href="/styles/userFormStyles.css">
        <link rel="stylesheet" href="/styles/sideBarStyle.css">
    </head>
    <body>

        <!-- Botó per obrir/tancar la barra lateral -->
        <button id="toggle-sidebar">☰</button>

        <main class="user-form-wrapper">
            <div class="user-form-card">
                <a href="/rewards/list" class="back-button">←</a>

                <form th:action="@{${formMode == 'create'} ? '/rewards/create' : '/rewards/edit/' + ${reward.id}}"
                      th:object="${reward}" method="post" class="user-form-content">

                    <div class="form-section">
                        <h2 th:text="${formMode == 'create'} ? 'Crear Recompensa' : 'Editar Recompensa'"></h2>

                        <div class="field-group">
                            <label for="nom">Nom:</label>
                            <input type="text" id="nom" maxlength="45" pattern="^[A-Za-zÀ-ÿ\s]+$" th:field="*{nom}" required />
                        </div>

                        <div class="field-group">
                            <label for="preu">Preu (punts):</label>
                            <input type="number" id="preu" th:field="*{preu}" min="0" step="0" required />
                        </div>

                        <div class="field-group">
                            <label for="comerc">Comerç:</label>
                            <input type="text" id="comerc" maxlength="45" th:field="*{comerc}" required />
                        </div>

                        <div class="field-group">
                            <label for="direccio">Direcció:</label>
                            <input type="text" id="direccio" th:field="*{direccio}" required />
                        </div>

                        <div class="field-group vertical">
                            <label for="descripcio">Descripció:</label>
                            <textarea id="descripcio" th:field="*{descripcio}"></textarea>
                        </div>

                        <!-- Mostrar el camp "estat" només en mode edició -->
                        <div class="field-group" th:if="${formMode == 'edit'}">
                            <label for="estat">Estat:</label>
                            <select id="estat" th:field="*{estat}">
                                <option th:each="est : ${T(cat.copernic.backend.entity.enums.RewardStatus).values()}"
                                        th:value="${est}" th:text="${est}"></option>
                            </select>
                        </div>

                        <!-- Assignar estat AVAILABLE per defecte en mode creació -->
                        <input type="hidden" th:if="${formMode == 'create'}" th:field="*{estat}" value="AVAILABLE" />

                        <div class="save-btn-container">
                            <button type="submit" class="btn save-btn" th:text="${formMode == 'create'} ? 'crear' : 'guardar'"></button>
                        </div>
                    </div>
                </form>
            </div>
        </main>

        <script src="/scripts/sidebar.js"></script>
    </body>
</html>
